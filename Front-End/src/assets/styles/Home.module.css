/* ../assets/styles/Home.module.css */
/* Styles specifically for the Home component layout and elements */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* --- Base Container & Global Styles --- */
.homeContainer {
  display: flex;
  flex-direction: column; /* Stack main area above fixed input */
  height: 100vh;
  width: 100vw;
  overflow: hidden; /* Prevent whole page scroll */
  background-color: #202123; /* Dark background theme */
  position: relative; /* ★★★ Context for absolutely positioned children (like .topBar) ★★★ */
  font-family: 'Inter', sans-serif;
  color: #e5e5e5; /* Default light text */
}


/* --- ★★★ Top Bar Container for Buttons and Logo ★★★ --- */
.topBar {
  position: absolute;
  top: 0;
  left: 0; /* Still starts left, but content pushed right */
  width: 100%;
  padding: 0.75rem 1.5rem;
  box-sizing: border-box;
  display: flex;
  justify-content: flex-end; /* ★ Keep pushing items RIGHT */
  align-items: center;
  gap: 0.75rem; /* Space between history button and logo */
  z-index: 10;
}

/* --- ★ History Button Style (Remains in topBar) ★ --- */
.historySidebarToggle {
  /* ★ NO absolute positioning needed, handled by flexbox */
  background: #2d333b;
  border: 1px solid #4f586a;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  padding: 0;
  cursor: pointer;
  color: #ccd6f6;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  transition: background-color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  line-height: 0;
}
.historySidebarToggle:hover {
  background: #3a4049;
  border-color: #6b7280;
  color: #e1e3e6;
}
.historySidebarToggle svg {
  width: 18px;
  height: 18px;
  display: block;
  fill: currentColor;
}


/* --- ★ FAQ Button Style (Positioned Independently Left) ★ --- */
.faqSidebarToggle {
  /* ★ ADD Absolute positioning relative to .homeContainer ★ */
  position: absolute;
  top: 60px;   /* ★ Adjust vertical position from top ★ */
  left: 25px; /* ★ Adjust horizontal position from left ★ */
  z-index: 15; /* Ensure it's above topBar if overlapping */

  /* Keep appearance styles */
  background: #2d333b;
  border: 1px solid #4f586a;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  padding: 0;
  cursor: pointer;
  color: #ccd6f6;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  transition: background-color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, top 0.2s ease, left 0.2s ease; /* Added position transition */
  line-height: 0;
}
.faqSidebarToggle:hover {
  background: #3a4049;
  border-color: #6b7280;
  color: #e1e3e6;
  /* Optional: Slightly move on hover? */
  /* top: 58px; */
  /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25); */
}
.faqSidebarToggle svg {
  width: 18px;
  height: 18px;
  display: block;
  fill: currentColor;
   /* ★ REMOVED conflicting top: 50px; from here ★ */
}


/* --- Logo Styling (Remains in topBar) --- */
.logoTopRight {
 /* ★ NO absolute positioning needed */
  display: flex;
  justify-content: center;
  top:30px; /* ★ Adjust vertical position from top ★ */
  align-items: center;
  transition: opacity 0.3s ease-in-out;
  margin-top:90px;
  /* ★ REMOVED conflicting top property */
}
.logoImage {
  height: 100px;
  width: 100px;
  display: block;
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(136, 154, 241, 0.3), 0 0 20px rgba(136, 154, 241, 0.2);
  border: 1px solid rgba(136, 154, 241, 0.4);
  top:30px; /* ★ Adjust vertical position from top ★ */
}

/* --- Main Content Area Padding --- */
.mainArea {
  /* ... other styles ... */
  /* Padding top still needed for the .topBar area */
  padding-top: 80px; /* Adjust based on .topBar height */
  /* ... other styles ... */
}

/* --- Responsive --- */
/* Adjust FAQ button positioning and other elements as needed */
@media (max-width: 768px) {
    .faqSidebarToggle {
        top: 55px; /* Adjust vertical position */
        left: 20px; /* Adjust horizontal position */
        width: 36px; height: 36px;
    }
    .faqSidebarToggle svg { width: 16px; height: 16px; }

    /* Adjust topBar items */
    .topBar { padding: 0.5rem 1rem; gap: 0.5rem; }
    .historySidebarToggle { width: 36px; height: 36px; }
    .historySidebarToggle svg { width: 16px; height: 16px; }
    .logoImage { height: 36px; width: 36px; }

    .mainArea { padding-top: 70px; /* Adjust if topBar height changed */ }
    /* ... other responsive styles ... */
}


/* --- Main Content Area (Scrollable) --- */
.mainArea {
  flex-grow: 1; /* Takes remaining vertical space */
  overflow-y: auto; /* Primary scroll container */
  display: flex;
  flex-direction: column;
  position: relative;
  padding-bottom: 120px; /* ★ Increased padding-bottom for space above fixed input */
  box-sizing: border-box;
  padding-top: 80px; /* ★★★ Space for the absolute .topBar - ADJUST AS NEEDED ★★★ */
  padding-left: 20px;
  padding-right: 20px;
  scroll-behavior: smooth;
}

/* Scrollbar styling (Optional but nice) */
.mainArea::-webkit-scrollbar { width: 6px; }
.mainArea::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 3px; }
.mainArea::-webkit-scrollbar-thumb { background-color: #4f586a; border-radius: 3px; }
.mainArea::-webkit-scrollbar-thumb:hover { background-color: #6b7280; }
/* Firefox scrollbar */
.mainArea { scrollbar-width: thin; scrollbar-color: #4f586a rgba(255, 255, 255, 0.05); }


/* --- Initial View Specific Styling --- */
.initialViewContent {
  flex-grow: 1; display: flex; flex-direction: column;
  justify-content: center; align-items: center; text-align: center;
  width: 100%; max-width: 600px; margin: 0 auto; margin-top: -5%; /* Adjust vertical centering */
  padding: 20px 0; box-sizing: border-box;
}
.greetingHeader { font-size: 2.5rem; font-weight: 600; color: #e1e3e6; margin-bottom: 12px; }
.greetingSubtext { font-size: 1rem; color: #a8adb4; margin-top: 0; line-height: 1.5; }
.shortcutHint { font-size: 0.85em; color: #7a7d83; margin-top: 20px; }
/* Removed .errorTextSmall, errors shown in .errorView or message card */


/* --- Loading/Error Styling --- */
.loadingView, .errorView {
  flex-grow: 1; display: flex; justify-content: center; align-items: center;
  text-align: center; padding: 20px; font-size: 1.1em; color: #a8adb4;
}
.errorView p { color: #ff8a8a; max-width: 500px; }


/* --- Chat History Styling (Active Chat View) --- */
.chatHistory {
  flex-grow: 1; display: flex; flex-direction: column; gap: 18px;
  width: 100%; max-width: 900px; /* Max width for chat content */
  margin: 0 auto; /* Center the chat column */
  padding-bottom: 10px; /* Small space at the very bottom */
}
.scrollAnchor { height: 1px; width: 1px; display: block; margin-top: -1px; }


/* --- Message Card Styling --- */
.messageCardWrapper { display: flex; width: 100%; }
.userWrapper { justify-content: flex-end; }
.botWrapper, .errorWrapper, .defaultMessageWrapper /* Add default */ {
  justify-content: flex-start; /* Group bot, error, default left */
}

.messageCard {
  padding: 12px 18px;
  border-radius: 18px;
  max-width: 75%; /* Max width of message bubble */
  width: fit-content; /* Bubble shrinks to content */
  word-wrap: break-word; /* Allow long words to break */
  line-height: 1.6;
  font-size: 0.98rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  color: #e1e3e6; /* Default text color */
  white-space: pre-wrap; /* ★★★ Preserve line breaks from backend ★★★ */
}

.user {
  background-color: #3a4049; /* User message background */
  border-bottom-right-radius: 6px; /* Slightly different corner */
}

.bot {
  background-color: #4a4f58; /* Bot message background */
  border-bottom-left-radius: 6px; /* Slightly different corner */
}

/* Specific styling for error messages shown in chat */
.error {
  background-color: #5c2b29; /* Dark red background */
  color: #ffcccc; /* Light red text */
  border: 1px solid #a84f55; /* Darker red border */
  border-radius: 6px; /* Use consistent radius or specific error radius */
}
/* Class added in JSX for content within error messages */
.errorMessageContent {
  font-style: italic; /* Optional: make errors italic */
}

/* Fallback style if role class is missing */
.defaultMessage {
  background-color: #666; /* Generic grey */
  border-bottom-left-radius: 6px;
}

/* Bot "Thinking" Indicator */
.thinking {
  min-height: 45px; /* Match typical message height */
  display: flex;
  align-items: center;
  opacity: 0.8;
  padding: 10px 18px; /* Match message padding */
  white-space: normal; /* Override pre-wrap for the dots */
}
.typingIndicator span {
  height: 8px; width: 8px;
  background-color: #888c93; /* Dot color */
  border-radius: 50%;
  display: inline-block;
  margin: 0 2px;
  animation: typing 1.4s infinite ease-in-out both;
}
.typingIndicator span:nth-child(1) { animation-delay: -0.32s; }
.typingIndicator span:nth-child(2) { animation-delay: -0.16s; }
.typingIndicator span:nth-child(3) { animation-delay: 0s; }

@keyframes typing {
  0%, 80%, 100% { transform: scale(0); opacity: 0; }
  40% { transform: scale(1.0); opacity: 1; }
}


/* --- Input Area Container (Fixed at Bottom) --- */
.inputAreaContainer {
  position: sticky; /* Sticks to bottom relative to .homeContainer */
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 1rem 1.5rem; /* Adjust padding */
  background-color: #202123; /* Match overall background */
  border-top: 1px solid #3a3c40; /* Subtle top border */
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.15); /* Shadow effect */
  box-sizing: border-box;
  display: flex; /* ★ Ensures items sit side-by-side */
  align-items: center; /* ★ Vertically aligns button with input */
  gap: 0.75rem; /* ★ Adjust gap between input and button(s) */
  z-index: 20; /* Ensure it's above main area content */
}
/* Ensure Input component takes up available space */
.inputAreaContainer > :first-child { /* Targets the Input component */
  flex-grow: 1;
}


/* --- ★★★ Style for the new History button next to the input ★★★ --- */
.inputHistoryButton {
  flex-shrink: 0; /* Prevent button from shrinking if space is tight */
  background: none; /* Transparent background */
  border: 1px solid #4f586a; /* Subtle border matching theme */
  color: #adb5bd; /* Icon color */
  width: 42px;   /* Adjust size as needed (e.g., match input height) */
  height: 42px;  /* Adjust size as needed */
  border-radius: 50%; /* Circular shape */
  padding: 0; /* Remove default padding */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
  line-height: 0; /* For better SVG alignment */
}

.inputHistoryButton:hover:not(:disabled) {
  background-color: rgba(255, 255, 255, 0.08); /* Subtle hover background */
  border-color: #6b7280; /* Slightly lighter border on hover */
  color: #dee2e6; /* Lighter icon color on hover */
  
}



.inputHistoryButton:disabled {
  cursor: not-allowed;
  opacity: 0.5; /* Dim button when disabled */
}

/* Style the SVG icon inside the button */
.inputHistoryButton svg {
  width: 20px; /* Adjust icon size */
  height: 20px; /* Adjust icon size */
  fill: currentColor; /* Use the button's text/icon color */
}
/* Ensure Input component takes up available space if other buttons were added */
.inputAreaContainer > :first-child { /* Targets the Input component */
  flex-grow: 1;
}


/* --- FAQ Sidebar Styles (Keep existing functional styles) --- */
.faqSidebar {
  position: fixed; top: 0; left: 0; transform: translateX(-100%);
  width: 300px; height: 100%; background-color: #282a2e;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.3);
  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1020; display: flex; flex-direction: column; border-right: 1px solid #444;
}
.faqSidebar.open { transform: translateX(0); }
.mainArea.faqSidebarActive { /* This class needs to be applied in JSX */
  /* Note: Pushing content with margin might conflict with centered .chatHistory */
  /* Consider overlaying or only adjusting padding if necessary */
  margin-left: 300px;
  transition: margin-left 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}
.faqSidebarHeader { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #444; flex-shrink: 0; }
.faqSidebarHeader h2 { margin: 0; font-size: 1.2rem; font-weight: 600; color: #e1e3e6; }
.closeFaqSidebarButton { background: none; border: none; font-size: 1.6em; cursor: pointer; color: #a8adb4; padding: 0; line-height: 1; transition: color 0.2s ease; }
.closeFaqSidebarButton:hover { color: #e1e3e6; }
.closeFaqSidebarButton svg { display: block; }
.faqSidebarContent { flex-grow: 1; overflow-y: auto; padding: 10px 0; }
.faqSidebarContent::-webkit-scrollbar { width: 5px; }
.faqSidebarContent::-webkit-scrollbar-track { background: transparent; }
.faqSidebarContent::-webkit-scrollbar-thumb { background: #4f586a; border-radius: 3px; }
.faqSidebarContent::-webkit-scrollbar-thumb:hover { background: #6b7280; }
.faqSidebarContent { scrollbar-width: thin; scrollbar-color: #4f586a transparent; }
.faqList { list-style: none; padding: 0; margin: 0; }
.faqItem { padding: 12px 20px; font-size: 0.95rem; color: #c1c3c7; cursor: pointer; transition: background-color 0.15s ease; border-bottom: 1px solid #3a3c40; outline: none; }
.faqItem:last-child { border-bottom: none; }
.faqItem:hover, .faqItem:focus-visible { background-color: #3a4049; color: #ffffff; }
.noFaqsText { text-align: center; padding: 40px 20px; color: #888c93; font-style: italic; font-size: 0.9rem; }


/* --- Previous Chats Sidebar (Imported Component - styles are in PreviousChats.module.css) --- */
/* Styles for how the main area behaves when Previous Chats sidebar is open (IF NEEDED) */
.mainArea.prevChatsSidebarActive { /* This class needs to be applied in JSX */
  /* Similar to FAQ sidebar, pushing content might be complex. Overlay is often simpler. */
  margin-right: 340 px; /* Adjust based on sidebar width */;
  transition: margin-right 0.3s ease-in-out;
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    .topBar {
      padding: 0.5rem 1rem; /* Reduce padding on smaller screens */
      gap: 0.5rem; /* Reduce gap */
    }
    .historySidebarToggle,
    .faqSidebarToggle {
      width: 36px; height: 36px; /* Slightly smaller buttons */
      top:10px;
      right: 30px; /* Adjust position for smaller screens */
      
    }
    .historySidebarToggle svg,
    .faqSidebarToggle svg {
      width: 16px; height: 16px;
    }
    .logoImage {
      height: 36px; width: 36px; /* Smaller logo */
      top:30px;
    }
    .mainArea {
      padding-top: 70px; /* Adjust if topBar height changed */
      padding-left: 15px; padding-right: 15px;
      padding-bottom: 110px; /* Adjust space above input */
    }
    .greetingHeader { font-size: 2rem; }
    .greetingSubtext { font-size: 0.95rem; }
    .chatHistory { gap: 15px; max-width: 100%; /* Allow chat to take full width */ }
    .messageCard { max-width: 80%; font-size: 0.95rem; }
    .faqSidebar { width: 280px; } /* Keep FAQ sidebar width */
    .inputAreaContainer { padding: 0.75rem 1rem; }
}

@media (max-width: 520px) {
    .topBar {
      padding: 0.4rem 0.75rem;
      gap: 0.3rem;
    }
    .historySidebarToggle,
    .faqSidebarToggle {
      width: 34px; height: 34px;
    }
     .historySidebarToggle svg,
    .faqSidebarToggle svg {
      width: 15px; height: 15px;
    }
    .logoImage {
      height: 34px; width: 34px;
    }
    .mainArea {
      padding-top: 65px; /* Adjust if topBar height changed */
      padding-bottom: 100px; /* Adjust space above input */
      padding-left: 10px; padding-right: 10px;
    }
    .greetingHeader { font-size: 1.8rem; }
    .messageCard { max-width: 85%; font-size: 0.92rem; }
    .faqSidebar { width: 85%; } /* Make FAQ sidebar wider % on small screens */
    .faqItem { padding: 10px 15px; font-size: 0.9rem; }
    .inputAreaContainer { padding: 0.6rem 0.75rem; }
}